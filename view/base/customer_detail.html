<style type="text/css">
.select-box.modal-body {
    max-height: 500px;
    overflow-y: scroll;
}
.select-box .dropdown {
    margin-left: 0;
    width: 100%;
}

.select-box .btn-default {
    background-color: #fff;
}

.select-box .ui-select-container .dropdown-menu {
    border: 1px solid #428bca;
    border-top: none;
    border-radius: 0;
    padding: 0;
}

.select-box .box-default .btn {
    font-size: 12px;
    padding: 6px 12px;
}

.modal-body.select-box .box-data .input-group-addon {
    min-width: 96px;
}
.label-border .border-div {
    border: 1px solid #cacaca;
    padding: 0px  0px 0px 10px;
    margin-right: 20px;
    margin-bottom: 15px;
    display: inline-block;
    cursor: pointer;
}
/*.label-border .active {
    background: #138ed4;
    color: #fff;
    border: 1px solid #138ed4;
}*/
.label-border .active span{
    background: #138ed4;
    color: #fff;
    display: inline-block;
    line-height: 30px;
    padding: 0 10px;
}
.label-border span{
    background: #fff;
    color: #333;
    display: inline-block;
    line-height: 30px;
    padding: 0 10px;
}
.toggleItem {
    height: 45px;
    overflow-y: hidden;
}
.add-span {
    display: inline-block;
    width: 21px;
    height: 21px;
    border: 1px solid #fff;
    background: #419acd;
    color: #fff;
    cursor: pointer;
    border-radius: 50%;
}
.add-span i {
    margin-left: 5px;
    margin-top: 4px;
}
.toggleItem{
    height: 45px;
    overflow-y: hidden;
}
</style>
<section class="content">
    <div class="box box-default" ng-class="{'loading': isLoading}" st-table="data" st-pipe="list">
        <div class="box-header">
            <h3 class="box-title" ng-bind="page.title"></h3>
            <nr-breadcrumb></nr-breadcrumb>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <form name="form" class="form">
                <div class="box-data addon-right">
                    <div class="row margin-bottom">
                        <div class="col-sm-4 no-padding-left">
                            <div class="input-group require">
                                <span class="input-group-addon">商家名称</span>
                                <div class="select-box">
                                    <input type="text" class="form-control col-xs-9" ng-model="data.name" required placeholder="请输入商家名称">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 no-padding-left">
                            <div class="input-group require">
                                <span class="input-group-addon">商家编码</span>
                                <div class="select-box">
                                    <input type="text" class="form-control col-xs-9" ng-model="data.code" required placeholder="请输入商家编码">
                                </div>
                            </div>
                        </div>
                        <!-- <div class="col-sm-4 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">所在地</span>
                                <div class="suggest-box">
                                    <input type="text" class="form-control col-xs-9" ng-model="data.address" placeholder="请输入所在地">
                                </div>
                            </div>
                        </div> -->
                    </div>
                    <div class="row margin-bottom">
                        <div class="col-sm-4 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">WMS编码</span>
                                <div class="suggest-box">
                                    <input type="text" class="form-control col-xs-9" ng-model="data.wmsCode" placeholder="请输入WMS编码">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 no-padding-left">
                            <div class="input-group require">
                                <span class="input-group-addon">使用系统</span>
                                <div class="select-box">
                                    <select class="form-control" ng-model="data.bcCustomerTpSystemVO.systemCode" required ng-options="v.systemCode as v.systemName for v in data.bcTpsystemListVO" ng-change="updateAppKey()"></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 no-padding-left">
                            <div class="input-group require radio-combo">
                                <span class="input-group-addon">是否有效</span>
                                <label>
                                    <input type="radio" name="isValid" class="nr-radio" ng-model="data.isValid" value="1" required>是
                                </label>
                                <label class="radio-combo">
                                    <input type="radio" name="isValid" class="nr-radio" ng-model="data.isValid" value="0" required>否
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-bottom">
                        <div class="col-sm-4 no-padding-left" ng-if="!isCreate">
                            <div class="input-group">
                                <span class="input-group-addon">APP_KEY</span>
                                <input type="text" class="form-control col-xs-9" ng-model="data.bcCustomerTpSystemVO.appKey" disabled>
                            </div>
                        </div>
                        <div class="col-sm-4 no-padding-left" ng-if="!isCreate">
                            <div class="input-group">
                                <span class="input-group-addon">SECRET_KEY</span>
                                <div class="suggest-box">
                                    <input type="text" class="form-control col-xs-9" ng-model="data.bcCustomerTpSystemVO.secretKey" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-bottom">
                        <div class="col-sm-12 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">所属仓库</span>
                                <div class="checkbox-combo">
                                    <label ng-repeat="v in data.warehouseInfoListVO">
                                        <input type="checkbox" ng-model="v.display">
                                        <i></i>
                                        <span ng-bind="v.name"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-bottom">
                        <div class="col-sm-3 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">邮编</span>
                                <input ng-model="data.zipCode" name="zipCode" type="text" class="form-control" ng-pattern="/^[1-9][0-9]{5}$/">
                                <span style="color:red"  ng-show="form.zipCode.$dirty && form.zipCode.$invalid ">
                                    <span ng-show="form.zipCode.$error">请输入合法的6位邮编</span>
                                </span>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="input-group">
                                <span class="input-group-addon">国家</span>
                                <input ng-model="data.country" type="text" class="form-control"/>
                            </div>
                        </div>
                        <div class="col-sm-6 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">所在地区</span>
                                <div class="col-sm-4 no-padding">
                                    <select class="form-control" ng-model="data.province" ng-options="v.areaname as v.areaname for v in config.province" ng-change="getCities(0)"></select>
                                </div>
                                <div class="col-sm-4 no-padding">
                                    <select class="form-control" ng-model="data.city" ng-options="v.areaname as v.areaname for v in config.city" ng-change="getCities(1)"></select>
                                </div>
                                <div class="col-sm-4 no-padding">
                                    <select class="form-control" ng-model="data.district" ng-options="v.areaname as v.areaname for v in config.dist"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-bottom">
                        <div class="col-sm-12 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">详细地址</span>
                                <div class="select-box">
                                    <input type="text" class="form-control col-xs-9" ng-model="data.address" placeholder="请输入详细地址">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row margin-bottom">
                        <div class="col-sm-12 no-padding-left">
                            <div class="input-group">
                                <span class="input-group-addon">商家说明</span>
                                <textarea type="text" class="form-control col-xs-9" ng-model="data.companyDesc" placeholder="请输入商家说明"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-data addon-right">
                    <div class="box-data-title">
                        <span>联系人信息</span>
                        <span ng-click="addContact($event)"><i class="fa fa-plus"></i>添加联系人</span>
                    </div>
                    <div ng-repeat="row in data.contactsInfoListVO">
                        <div class="row margin-bottom">
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">联系人类型</span>
                                    <div class="select-box">
                                        <input type="text" name="conType{{$index}}" class="form-control col-xs-9" ng-model="row.conType" placeholder="请输入联系人类型" ng-maxlength="20">
                                    </div>
                                    <span style="color:red"  ng-show="form.conType{{$index}}.$dirty && form.conType{{$index}}.$invalid ">
                                        <span ng-show="form.conType{{$index}}.$error">只能输入20位</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">联系人</span>
                                    <div class="select-box">
                                        <input type="text" name="name{{$index}}" class="form-control col-xs-9" ng-model="row.name" placeholder="请输入联系人" ng-maxlength="20">
                                    </div>
                                    <span style="color:red" ng-show="form.name{{$index}}.$dirty && form.name{{$index}}.$invalid ">
                                        <span ng-show="form.name{{$index}}.$error">只能输入20位</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">手机号码</span>
                                    <div class="select-box">
                                        <input type="tel" name="telephone{{$index}}" class="form-control col-xs-9" ng-model="row.telephone" placeholder="请输入手机号码" ng-maxlength="11" ng-pattern="/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/">
                                    </div>
                                    <span style="color:red" ng-show="form.telephone{{$index}}.$dirty && form.telephone{{$index}}.$invalid ">
                                        <span ng-show="form.telephone{{$index}}.$error">请输入合法的11位手机号码</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row margin-bottom">
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">固定电话</span>
                                    <div class="suggest-box">
                                        <input type="text" name="mobilePhone{{$index}}" class="form-control col-xs-9" ng-model="row.mobilePhone" placeholder="请输入固定电话" ng-maxlength="20" ng-pattern="/^[0-9]{1,20}$/">
                                    </div>
                                    <span style="color:red" ng-show="form.mobilePhone{{$index}}.$dirty && form.mobilePhone{{$index}}.$invalid ">
                                        <span ng-show="form.mobilePhone{{$index}}.$error">最多只能输入20位数字</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">传真</span>
                                    <div class="select-box">
                                        <input type="text" name="fax{{$index}}" class="form-control col-xs-9" ng-model="row.fax" placeholder="请输入传真" ng-maxlength="20" ng-pattern="/^[0-9]{1,20}$/">
                                    </div>
                                    <span style="color:red"  ng-show="form.fax{{$index}}.$dirty && form.fax{{$index}}.$invalid ">
                                        <span ng-show="form.fax{{$index}}.$error">最多只能输入20位数字</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon">邮箱地址</span>
                                    <div class="select-box">
                                        <input type="email" name="email{{$index}}" class="form-control col-xs-9" ng-model="row.email" placeholder="请输入邮箱地址" ng-pattern="/^([a-zA-Z0-9_\.\-])+\@([a-zA-Z0-9\-])+\.([a-zA-Z0-9]{0,8})$/">
                                    </div>
                                    <span style="color:red"  ng-show="form.email{{$index}}.$dirty && form.email{{$index}}.$invalid ">
                                        <span ng-show="form.email{{$index}}.$error">请输入合法的邮箱地址</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-3 no-padding-left">
                                <div class="input-group">
                                    <span class="input-group-addon"></span>
                                    <div class="select-box">
                                        <button class="btn btn-normal" ng-click="removeContact($event, $index)"><i class="fa fa-close"></i>删除</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-data">
                    <div class="box-data-title">
                        <span>店铺列表</span>
                        <span ng-click="openAdd(-1)"><i class="fa fa-plus"></i>添加店铺</span>
                        <div class="right">
                            <button class="btn btn-op" custom-fields="config.fields"><i class="fa fa-gear fa-only"></i></button>
                        </div>
                    </div>
                    <table class="table table-bordered table-striped text-center">
                        <thead ng-if="shopData.length">
                            <tr>
                                <th>操作</th>
                                <th ng-repeat="row in config.fields | filter: {display:true}">{{row.value}}</th>
                            </tr>
                        </thead>
                        <tbody ng-if="!shopData.length">
                            <tr>
                                <td class="nodata" colspan="{{ (config.fields | count: {display:true}) + 1 }}">
                                    <span>暂无店铺</span>
                                </td>
                            </tr>
                        </tbody>
                        <tbody ng-if="shopData.length">
                            <tr ng-repeat="row in shopData track by $index ">
                                <td class="box-table-action">
                                    <span class="box-border-right" ng-click="openAdd(row, $index)">编辑</span>
                                    <span class="box-border-right" ng-click="deleteShop(row, $index)">删除</span>
                                </td>
                                <td ng-repeat="field in config.fields | filter:{display:true}">
                                    <span ng-if="field.key=='areaCode'">{{config.area_hash[row[field.key]]}}</span>
                                    <span ng-if="field.key=='shopPlatformCode'">{{config.plat_hash[row[field.key]]}}</span>
                                    <span ng-if="field.key!='areaCode' && field.key!='shopPlatformCode'">{{row[field.key]}}</span>
                                    <!-- <span ng-else>{{row[field.key]}}</span>  -->
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- <div class="box-data">
                    <div class="box-data-title">
                        <span>商家接口</span>
                        <div class="right">
                            <button class="btn btn-op" ng-model="otherSearch" ng-click="toggle($event)">
                                <i class="fa fa-sort-desc" ng-if="otherSearch">查看更多接口</i>
                                <i class="fa  fa-sort-up" ng-if="!otherSearch">收起</i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="box-data padding-top-none" id="toggleItem">
                        <div class="checkbox-combo label-border">
                            <div ng-repeat="v in data.interfaceConfigListVO" class="border-div box-select" ng-class="{true: 'active', false: 'inactive'}[v.isActive]">
                                <label>
                                    <input type="checkbox" ng-model="v.display">
                                    <i></i>
                                </label>
                                <span ng-bind="v.businessType" ng-click="changeInter($event, v)"></span>
                            </div>
                        </div>
                    </div>
                    <div class="box-data padding-top-none" ng-if="config.allRules">
                        <div class="box-data-title">
                            <span>节点明细</span>
                            <button class="btn btn-normal" ng-click="setRule('add', $event)"><i class="fa fa-plus"></i>添加</button>
                        </div>
                        <div ng-if="config.hadInterRule">
                            <div class="row margin-bottom">
                                <div class="col-sm-4 text-center"><span>节点名称</span></div>
                                <div class="col-sm-4 text-center"><span>规则名称</span></div>
                                <div class="col-sm-4 text-center"><span>规则内容</span></div>
                            </div>
                            <div class="row margin-bottom" ng-repeat="row in config.hadInterRule">
                                <div class="col-sm-4">
                                    <div class="input-group">
                                        <span class="input-group-addon"></span>
                                        <select class="form-control" ng-model="row.propertyId" ng-options="v.id as v.dataField for v in config.allRules" ng-change="setRule('change', row)"></select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="input-group">
                                        <span class="input-group-addon"></span>
                                        <select class="form-control" ng-model="row.expression" ng-options="v.code as v.name for v in row.exp"></select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="input-group">
                                        <span class="input-group-addon"></span>
                                        <input type="text" class="form-control col-xs-9" ng-model="row.matchContent" placeholder="请输入规则内容">
                                        <span class="input-group-addon" ng-click="removeItem($event, $index)">
                                            <span class="add-span"><i class="fa fa-close"></i></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="box-data padding-top-none" ng-if="config.tree.length">
                        <div class="row margin-bottom">
                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon txtR">报文格式</span>
                                    <div class="suggest-box radio-combo">
                                        <label>
                                            <input type="radio" name="formatType" class="nr-radio" ng-model="config.formatType" value="1">XML
                                        </label>
                                        <label class="radio-combo">
                                            <input type="radio" name="formatType" class="nr-radio" ng-model="config.formatType" value="2">JSON
                                        </label>
                                        <label class="radio-combo">
                                            <input type="radio" name="formatType" class="nr-radio" ng-model="config.formatType" value="3">MAP
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row margin-bottom">
                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon txtR">接口协议</span>
                                    <div class="suggest-box radio-combo">
                                        <label>
                                            <input type="radio" name="apiProtocol" class="nr-radio" ng-model="config.apiProtocol" value="http">HTTP
                                        </label>
                                        <label class="radio-combo">
                                            <input type="radio" name="apiProtocol" class="nr-radio" ng-model="config.apiProtocol" value="curl">CURL
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row margin-bottom">
                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon txtR">请求方式</span>
                                    <div class="suggest-box radio-combo">
                                        <label>
                                            <input type="radio" name="apiMethod" class="nr-radio" ng-model="config.apiMethod" value="get">GET
                                        </label>
                                        <label class="radio-combo">
                                            <input type="radio" name="apiMethod" class="nr-radio" ng-model="config.apiMethod" value="post">POST
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="box-data padding-top-none" ng-if="config.tree.length">
                        <div class="box-data-title">
                            <span>推送节点</span>
                        </div>
                        <div class="tree-box">
                            <div class="col-md-4 left tree">
                                <ul>
                                    <li class="parent_li" ng-repeat="cat in config.tree">
                                        <span>
                                            <i ng-if="cat.children && cat.children.length" class="fa fa-lg" ng-class="{'fa-plus-circle': cat.collapsed,'fa-minus-circle': !cat.collapsed}" ng-show="cat.children.length" ng-click="cat.collapsed = !cat.collapsed"></i>
                                            <label>
                                                <input type="radio" ng-click="select(cat.id)" ng-checked="cat.id == config.parms.id" name="interface" /> {{cat.dataField}}
                                            </label>
                                        </span>
                                        <ul ng-if="cat.children" ng-hide="cat.collapsed">
                                            <li class="parent_li" ng-repeat="subcat in cat.children">
                                                <span>
                                                    <label>
                                                        <input type="radio" name="interface" ng-click="select(subcat.id)" ng-checked="subcat.id == config.parms.id" /> {{subcat.dataField}}
                                                    </label>
                                                </span>
                                                <ul ng-if="subcat.children" ng-hide="subcat.collapsed">
                                                    <li class="parent_li" ng-repeat="trdcat in subcat.children">
                                                        <span>
                                                            <label>
                                                                <input type="radio" name="interface" ng-click="select(trdcat.id)" ng-checked="trdcat.id == config.parms.id" /> {{trdcat.dataField}}
                                                            </label>
                                                        </span>
                                                        <ul ng-if="trdcat.children" ng-hide="trdcat.collapsed">
                                                            <li class="parent_li" ng-repeat="forth in trdcat.children">
                                                                <span>
                                                                    <label>
                                                                        <input type="radio" name="interface" ng-click="select(forth.id)" ng-checked="forth.id == config.parms.id" /> {{forth.dataField}}
                                                                    </label>
                                                                </span>
                                                                <ul ng-if="forth.children" ng-hide="forth.collapsed">
                                                                    <li class="parent_li" ng-repeat="fifth in forth.children">
                                                                        <span>
                                                                            <label>
                                                                                <input type="radio" name="interface" ng-click="select(fifth.id)" ng-checked="fifth.id == config.parms.id" /> {{fifth.dataField}}
                                                                            </label>
                                                                        </span>
                                                                    </li>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>

                            <div class="col-md-8 right" ng-if="config.parms">
                                <div class="box-data-title">
                                    <span>节点详情</span>
                                </div>
                                <div class="row margin-bottom">
                                    <div class="col-sm-8">
                                        <div class="input-group">
                                            <span class="input-group-addon txtR">映射节点</span>
                                            <input type="text" name="reactData" class="form-control col-xs-6" ng-model="config.parms.mappingCode"  placeholder="请输入映射节点">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="config.parms.sysContent.length" class="box-data">
                                    <div class="box-data-title">
                                        <span>映射内容</span>
                                    </div>
                                    <div class="row margin-bottom" ng-repeat="row in config.parms.sysContent">
                                        <div class="col-sm-6">
                                            <div class="input-group">
                                                <span class="input-group-addon txtR">系统值</span>
                                                <input type="text" name="systemInfo" class="form-control col-xs-6" ng-model="row.contentVal" disabled>
                                            </div>
                                        </div>
                                        <div class="col-sm-6" ng-show="config.parms.mappingCode">
                                            <div class="input-group">
                                                <span class="input-group-addon txtR">映射内容</span>
                                                <input type="text" name="reactSys" class="form-control col-xs-6" ng-model="row.mappingVal"  placeholder="请输入映射内容">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="box-footer">
                    <button class="btn btn-normal" ng-click="update()" ng-disabled="form.$invalid">保存</button>
                    <a class="btn btn-op" ng-click="back()">取消</a>
                </div>
            </form>
        </div>
        <!-- /.box-body -->
    </div>
</section>
<script type="text/ng-template" id="example.html">
    <div class="modal fade in" style="display:block;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" ng-click="close(false)"><span aria-hidden="true">×</span></button>
                    <h4 class="modal-title" ng-bind="data.title">新增店铺</h4>
                </div>
                <form name="form">
                    <div class="modal-body box-default select-box">
                        <div class="row box-data no-margin">
                            <div class="col-sm-6">
                                <div class="input-group require">
                                    <span class="input-group-addon">店铺代码</span>
                                    <input type="text" class="form-control col-xs-9" ng-model="data.param.code" required placeholder="请输入店铺代码">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-group require">
                                    <span class="input-group-addon">店铺名称</span>
                                    <input type="text" class="form-control col-xs-9" ng-model="data.param.name" required placeholder="请输入店铺名称">
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-6">
                                <div class="input-group require">
                                    <span class="input-group-addon">所属关区</span>
                                    <select class="form-control" ng-model="data.param.areaCode" required ng-options="v.areaCode as v.value for v in data.areaData" ng-change="data.refreshArea(data)"></select>
                                </div>
                            </div>
                            <div class="col-sm-6" ng-show="data.param.areaCode">
                                <div class="input-group require">
                                    <span class="input-group-addon">所属平台</span>
                                    <select class="form-control" ng-model="data.param.shopPlatformCode" required ng-options="v.shopPlatformCode as v.value for v in data.platData"></select>
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <span class="input-group-addon">上级店铺名称</span>
                                    <select class="form-control" ng-model="data.param.parentId" ng-options="v.parentId as v.value for v in data.shopsData"></select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <span class="input-group-addon">海关侧取值</span>
                                    <input type="text" name="customVal" class="form-control col-xs-9" ng-model="data.param.customVal" placeholder="请输入海关侧取值" ng-maxlength="30">
                                    <span style="color:red"  ng-show="form.customVal.$dirty && form.customVal.$invalid ">
                                        <span ng-show="form.customVal.$error">只能输入30位</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-6">
                                <div class="input-group require radio-combo">
                                    <span class="input-group-addon">是否备案</span>
                                    <label>
                                        <input type="radio" name="r3" class="nr-radio" ng-model="data.param.isRecord" value="1" required>是
                                    </label>
                                    <label class="radio-combo">
                                        <input type="radio" name="r3" class="nr-radio" ng-model="data.param.isRecord" value="0" required>否
                                    </label>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-group require radio-combo">
                                    <span class="input-group-addon">店铺状态</span>
                                    <label>
                                        <input type="radio" name="r4" class="nr-radio" ng-model="data.param.isValid" value="1" required>激活
                                    </label>
                                    <label class="radio-combo">
                                        <input type="radio" name="r4" class="nr-radio" ng-model="data.param.isValid" value="0" required>禁用
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <span class="input-group-addon">邮编</span>
                                    <input ng-model="data.param.zipCode" name="zipCode" type="text" class="form-control" ng-pattern="/^[1-9][0-9]{5}$/">
                                    <span style="color:red"  ng-show="form.zipCode.$dirty && form.zipCode.$invalid ">
                                        <span ng-show="form.zipCode.$error">请输入合法的6位邮编</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <span class="input-group-addon">国家</span>
                                    <input ng-model="data.param.country" type="text" class="form-control"/>
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon">所在地区</span>
                                    <div class="col-sm-4 no-padding">
                                        <select class="form-control" ng-model="data.param.province" ng-options="v.areaname as v.areaname for v in data.province" ng-change="data.getCities(0, data)"></select>
                                    </div>
                                    <div class="col-sm-4 no-padding">
                                        <select class="form-control" ng-model="data.param.city" ng-options="v.areaname as v.areaname for v in data.city" ng-change="data.getCities(1, data)"></select>
                                    </div>
                                    <div class="col-sm-4 no-padding">
                                        <select class="form-control" ng-model="data.param.district" ng-options="v.areaname as v.areaname for v in data.dist"></select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon">详细地址</span>
                                    <input type="text" class="form-control col-xs-9" ng-model="data.param.address" placeholder="请输入详细地址">
                                </div>
                            </div>
                        </div>
                        <div class="row box-data no-margin">
                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon">备注</span>
                                    <textarea type="text" class="form-control col-xs-9" ng-model="data.param.remark" placeholder="请输入店铺备注说明"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="box-data addon-right">
                            <div class="box-data-title">
                                <span>联系人信息</span>
                                <span ng-click="data.addContact($event, data)"><i class="fa fa-plus"></i>添加联系人</span>
                            </div>
                            <div ng-repeat="row in data.param.contactsInfoListVO">
                                <div class="row margin-bottom">
                                    <div class="col-sm-6">
                                        <div class="input-group">
                                            <span class="input-group-addon">联系人类型</span>
                                            <div class="select-box">
                                                <input type="text" name="conType{{$index}}" class="form-control col-xs-9" ng-model="row.conType" placeholder="请输入联系人类型" ng-maxlength="20">
                                            </div>
                                            <span style="color:red"  ng-show="form.conType{{$index}}.$dirty && form.conType{{$index}}.$invalid ">
                                                <span ng-show="form.conType{{$index}}.$error">只能输入20位</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="input-group require">
                                            <span class="input-group-addon">联系人</span>
                                            <div class="select-box">
                                                <input type="text" name="name{{$index}}" class="form-control col-xs-9" ng-model="row.name" placeholder="请输入联系人" ng-maxlength="20" required>
                                            </div>
                                            <span style="color:red" ng-show="form.name{{$index}}.$dirty && form.name{{$index}}.$invalid ">
                                                <span ng-show="form.name{{$index}}.$error">只能输入20位</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin-bottom">
                                    <div class="col-sm-6">
                                        <div class="input-group">
                                            <span class="input-group-addon">联系方式</span>
                                            <div class="select-box">
                                                <input type="tel" name="telephone{{$index}}" class="form-control col-xs-9" ng-model="row.telephone" placeholder="请输入手机号码" ng-maxlength="20" ng-pattern="/^[0-9]{1,20}$/">
                                            </div>
                                            <span style="color:red" ng-show="form.telephone{{$index}}.$dirty && form.telephone{{$index}}.$invalid ">
                                                <span ng-show="form.telephone{{$index}}.$error">请输入合法的手机号码</span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="input-group">
                                            <span class="input-group-addon">邮箱地址</span>
                                            <div class="select-box">
                                                <input type="email" name="email{{$index}}" class="form-control col-xs-9" ng-model="row.email" placeholder="请输入邮箱地址" ng-pattern="/^([a-zA-Z0-9_\.\-])+\@([a-zA-Z0-9\-])+\.([a-zA-Z0-9]{0,8})$/">
                                            </div>
                                            <span style="color:red"  ng-show="form.email{{$index}}.$dirty && form.email{{$index}}.$invalid ">
                                                <span ng-show="form.email{{$index}}.$error">请输入合法的邮箱地址</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row margin-bottom">
                                    <div class="col-sm-8">
                                        <div class="input-group">
                                            <span class="input-group-addon">地址</span>
                                            <div class="select-box">
                                                <input type="text" class="form-control col-xs-9" ng-model="row.address" placeholder="请输入联系人地址">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 no-padding-left">
                                        <div class="input-group">
                                            <span class="input-group-addon"></span>
                                            <div class="select-box txtR">
                                                <button class="btn btn-normal" ng-click="data.removeContact($event, $index, data)"><i class="fa fa-close"></i>删除</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer text-center">
                        <button class="btn btn-primary pull-center" ng-click="close(true)" ng-disabled="form.$invalid">确定</button>
                        <button class="btn btn-default pull-center" ng-click="close(false)">取消</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>